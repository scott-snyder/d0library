SUPPLEMENTAL TOOLS ACCOMPANYING THE LEVEL 1 SIMULATOR        16-MAR-1992 
-----------------------------------------------------

    There exist companion tools to the Level 1 Simulator which allow the
user to view some information which would otherwise be hidden inside ZEBRA
files.  This document describes how to build and run these programs. 
Currently, the following tools exist:

o   A tool to examine the contents of the TRGR banks of an event file.
o   A tool to examine the contents of the BLS Gain Correction file.
o   A tool to examine the energy deposits in ZEBRA event files. 



TRGR BANK DISPLAY
-----------------

    The TRGR Bank Display Tool is an interactive program which allows the
user to view the contents of TRGR banks in ZEBRA event files. It uses the
simulation dump subsystem of L1SIM to generate the listings, so the output
of this tool is quite similar to the dump that would be produced by L1SIM
if it had generated the input TRGR bank.

    The program is distributed as a Program Builder package running under
the D0USER framework. To build the program, invoke Program Builder to
create the necessary source and link files from the package description
file:

$ PBD/FRAME=D0USER/PACKAGE=TRGR_DISP/ZEBCOM=1000000

    Link the program to produce an executable:

$ @TRGR_DISP_D0USER.LNK

    Define the logicals and symbols used by the program:

$ @TRGR_DISP_D0USER.COM

    After executing the previous command file, the TRGR_DISP program can
be run using the command:

$ D0USER

    After starting the TRGR Bank Display Tool, the menu item 'Define dumps'
must be selected to choose the types of information included in the display
and to select how many events to dump.

    Accecpt the defaults on the first 'Define dumps' menu presented (by
pressing PF1).  
    
    The next menu will prompt for which types of information to include in
the display. Some items in the display are quite lengthy, so the user
has the option of omitting one or more of them.  The following menu is used
to select the sections to be included/excluded:

 Control Information                     Yes    No
 Event Summary Current Event             Yes    No
 Datablock Contents (PRTRGR)             Yes    No
 Event Summary Previous Event            Yes    No
 Andor Term Listing by Name              Yes    No
 Trigger Tower ADC Values in Counts      Yes    No
 Trigger Tower ADC Values in GeV         Yes    No
 Level 1 Datablock Raw Dump              Yes    No

    For information on what is included in each of these sections of the
display, see the section 'Generating Dumps of TRGR Banks' in L1SIM.DOC.

    To view each file directly from the D0user program, answer Y to the
next question "Dump event to screen?". 

    The Total number of consecutive events dumped is controlled by NDUMP,
the number of events skipped before the first event is dumped is controlled
by NSKIP (e.g. to dump all events, pick a large NDUMP and NSKIP=0)


    To start generating displays, select the menu option 'Auto Process'.
The following gives sample answers to the questions



 Will you be reading files from tape? [N]> N

If you give wild card all files with given string are processed
but option Manual Process will stop after N events requested.
If name of input file is NONE no file will be open.

 Name of input file > EVENT_FILE.DAT  (The name of the event file)

 Is input file in exchange mode? [N]:> N (Typically, the event files are
                                          not in exchange mode.)

Store histograms ? 0=NO, 1=after each run, 2=end of job only > 0
                                         (No histograms are generated by
                                            TRGR_DISP)



    The event file will then be read in, and TRGR banks will be dumped.
D0user creates one file for each event dumped, with the name  
E_(run #)_(event #).DUMP. 


BLS GAIN CORRECTION DISPLAY
---------------------------

    The BLS Gain Correction Display tool is an interactive program which
allows the user to view the contents of a BLS Gain Correction file.

    To build the program, issue the following DCL command:

$ LINK/EXE=BLS_DISP D0$LEVEL1:LEVEL1/LIB/INCLUDE=L1UTIL_DISP_BLS_COEFF, -
                    D0$UTIL:UTIL4/OPT

    To run the program, issue the following DCL command:

$ RUN BLS_DISP

    The program will first prompt for the name of the BLS file. It then
prompts for the ETA and PHI coordinates to display. The display shows the
BLS Gain Correction for each Depth which makes up the selected Trigger
Tower. 

    To exit, just hit <RETURN> at the prompt for the ETA coordinate.


TRIGGER TOWER ENERGY DISPLAY
----------------------------

    The Trigger Tower Energy Display tool is an interactive program which
allows the user to view the energy deposited in each Depth which makes up a
Trigger Tower, as read from a ZEBRA event file.

    The program is provided as a D0USER user package. To build the program,
invoke Program Builder to create the necessary source and link files from
the package description file:

$ PBD/FRAME=D0USER/PACKAGE=TTOWER_DISP/ZEBCOM=1000000

    Link the program to produce an executable:

$ @TTOWER_DISP_D0USER.LNK

    Define the logicals and symbols used by the program:

$ @TTOWER_DISP_D0USER.COM

    After executing the previous command file, the TTOWER_DISP program can
be run using the command:

$ D0USER

    From the D0USER main menu, select the MANUAL PROCESS action and answer
the questions the program asks:

  Store histograms ? 0=NO, 1=after each run, 2=end of job only > 0

  Name of input file > BUF3:[HEP.TRIGGER]STA_HITS.DAT  (for example)

  Is input file in exchange mode? [N]:> N (Typically event files are not in
                                           exchange mode.)

  Process all events for remaining runs? Y/N > N

  Number of events > 3 (This is the number of events to examine)

  Number of events to skip.Default is 0 > 0
 

    After each event is read in, the program prompts for the ETA and PHI
coordinates of the Trigger Tower to examine. If the event has any energy
deposits in the selected Trigger Tower, they are listed by Depth.

    To proceed to the next event, just hit <RETURN> at the prompt for the
ETA coordinate.

    After all events have been processed, the D0USER DONE_WITH_DATA menu
will appear. Select FINISH to exit the program.


