
C DI3INC.INC  - include file for DI3000 emulator
C=============================================
      INTEGER*4 IQD        
      INTEGER*4 DI3INI        
      INTEGER*4 DI3DIN        
      INTEGER*4 DI3ADV        
      INTEGER*4 DI3DEV        
      CHARACTER*4 DI3MDEV     
      EQUIVALENCE (DI3DEV,DI3MDEV)
      COMMON /DI3M/IQD(47),DI3DEV,DI3INI,DI3ADV,DI3DIN
      COMMON /DI3PR/JUNIT
C  POLYGON SCRATCH COMMON
      COMMON/PSCRAT/NPMAX,XPOLY(2000),YPOLY(2000),ZPOLY(2000)
C
C-----------------SEGMENT COMMONS------------------------
C  CODE FOR EACH SUBROUTINE (FOR BRANCHING FROM DISPLAY LIST)
      COMMON/SUBIDS/PUTS,PUTSUP,
     &  I3DRAW,I3MARK,I3MOVE,I3POLY,I3PLGN,
     &  I2DRAW,I2MARK,I2MOVE,I2POLY,I2PLGN,
     &  IJCOLR,IJINTN,IJSTYL, IJWID, IJPEN,
     &  IJPEDG,IJPSTY,IJPCOL,IJPINT,IJMARK,
     &  IJPICK,IJPATH,IJFONT,IJJUST,IJRECT,
     &  IR3DRA,IR3MRK,IR3MOV,IR3PLY,IR3PGN,
     &  IRDRAW,IRMARK,IRMOVE,IRPOLY,IRPLGN,
     &  IJSIZE,IJBASE,IPLANE,I1STRG,I3STRG
      LOGICAL PUTS,PUTSUP
C  IMAGE TRANSFORMATIONS ON SEGMENTS
      PARAMETER (NSMX=100)
      COMMON/SEGTR/IASSO(NSMX),PXSEG(NSMX),PYSEG(NSMX),SXSEG(NSMX),
     &  SYSEG(NSMX),ROTSEG(NSMX),TXSEG(NSMX),TYSEG(NSMX)
C  CURRENT SEGMENT TRANSFORMATIONS
      COMMON/CURIMG/ITYCUR,PXC,PYC,SXC,SYC,TXC,TYC,CSC,SNC
C  SEGMENT BOOKKEEPING
      COMMON/SEGS/NSMXX,NSEGS,NUMSEG(NSMX),IVIS(NSMX),INDS1(NSMX),
     & NCALLS(NSMX),ITTYP(NSMX),IDETEC(NSMX),IFMODE,RJ4SAV(4,3,NSMX),
     & ISPRIO(NSMX)
C               NSMX    MAX. # OF SEGMENTS ALLOWED
C               NSEGS   CURRENT # OF SEGMENTS
C               NUMSEG  ID NUMBER ("NAME") OF SEGMENT
C               IVIS    VISIBILITY FLAG (0=NO, 1=YES)
C               INDS1   BEGINNING OF SEGMENT IN BLOC STORAGE
C               NCALLS  NUMBER OF SUBROUTINE CALLS IN THIS SEGMENT
C               ITTYP   IMAGE TRANSFORMATION TYPE
C               IDETEC  DETECTABILITY OF THIS SEGMENT (0=N0,1=YES) (PICKS)
C               IFMODE  =1 WHEN PLAYING BACK IN JFRAME (BLOCK PUTS)
C               RJ4SAV  INITIAL WINDOWS FOR EACH SEGMENT
C  SEGMENT BULK STORAGE FOR DISPLAY LISTS
      PARAMETER (NBLOC=400000)
      COMMON/SGSTOR/NBLOCX,SBLOC(NBLOC),ISPTR
      INTEGER IBLOC(NBLOC)
      EQUIVALENCE (IBLOC,SBLOC)
C               NBLOC   MAX SIZE OF BLOC STORAGE
C               SBLOC   THE DISPLAY LIST
C               ISPTR   POSITION OF CURRENT POINTER
C
C  DISPLAY LIST FORMAT:
C       ...,IDSUBR1,ARG1,ARG2,...
C       ...,IDSUBR2,DIM1,ARG1(1),ARG1(2),...,DIM2,ARG2(1),ARG2(2),...
C
C  PICK COMMONS
      COMMON/PKREGS/NPICKS,IPNOW,ISNOW,IPKSEG(100),IDPICK(100),
     & IPRIOR(100),PKXMN(100),PKYMN(100),PKXMX(100),PKYMX(100),
     & PDXAPR,PDYAPR
      COMMON/PICKY/NPSEGS,NMPSEG(100),IPECHO,IPBUTN,
     &  XECHO(6),YECHO(6),IASSOC(6)
C
C------------------RJ3 ARRAY (J3RGET)-----------------
      COMMON/DI3RJ3/
     &   XSIZE, YSIZE,   GAP,           
     &  XBASEN,YBASEN,ZBASEN,           
     &  XPLANN,YPLANN,ZPLANN,           
     &  XSIZED,YSIZED,  GAPD,           
     &  XBASND,YBASND,ZBASND,           
     &  XPLNND,YPLNND,ZPLNND,           
     &     XVW,   YVW,   ZVW,           
     &  VNORMX,VNORMY,VNORMZ,           
     &    VUPX,  VUPY,  VUPZ,           
     &   VDIST, HDIST, YDIST,           
     &   XPROJ, YPROJ, ZPROJ,           
     &   VVECX, VVECY, VVECZ,           
     &   UVECX, UVECY, UVECZ            
      REAL RJ3(3,13),UPVEC(3),VVEC(3),UVEC(3),NVEC(3)
      REAL VVIEW(3),VPROJ(3)
      EQUIVALENCE (UPVEC,VUPX),(VVEC,VVECX),(UVEC,UVECX)
      EQUIVALENCE (NVEC,VNORMX),(XSIZE,RJ3(1,1)),(VPROJ,XPROJ)
      EQUIVALENCE (VVIEW,XVW)
C------------------RJ4 ARRAY (J4RGET)-----------------
C  WINDOW SPECIFICATIONS
      COMMON/DI3RJ4/
     &   UMIN, UMAX, VMIN, VMAX,        
     &  VXMIN,VXMAX,VYMIN,VYMAX,        
     &  VCXMN,VCXMX,VCYMN,VCYMX         
      DIMENSION RJ4(4,3)
      EQUIVALENCE (UMIN,RJ4(1,1))
C------------------IJ1 ARRAY (J1IGET)-----------------
      COMMON/DI3IJ1/
     &  ISEGNM,INSIDE,IERROR,IDEBUG,ICOLOR,     
     &  IINTEN,ILSTYL,ILWID ,IPEN  ,IPEDGE,     
     &  IPSTYL,IPCOLO,IPINT ,IMARK ,IPICID,
     &  ICLRDF,IINTDF,ILSTDF,ILWDDF,IPENDF,
     &  IPEDDF,IPINDF,IPCLDF,IPNTDF,IMRKDF,
     &  IPIKDF,IPATH ,IFONT ,IHJUST,IVJUST,
     &  IPTHDF,IFONDF,IHJUDF,IVJUDF,IVISDF,
     &  IHIDF ,IDETDF,IPRIDF,ITYPDF,IWCLIP,
     &  IHCLIP,IYCLIP,IRIGHT,IPROJ ,IMODEL,
     &  IBATCH
      DIMENSION IJ1(46)
      EQUIVALENCE (ISEGNM,IJ1(1))
C------------------RJ16 ARRAY (J16GET)----------------
      COMMON/VIEW/MVIEW(4,4),MVINV(4,4),MMODEL(4,4)
      REAL*4 MVIEW,MVINV,MMODEL
      DIMENSION RJ16(4,4,3)
      EQUIVALENCE (RJ16,MVIEW)
C------------------SCRATCH---------------------------
      COMMON/DI3SCR/XBASE,YBASE,ZBASE   
     &            XPLANE,YPLANE,ZPLANE  
C
C VAXSTATION (UIS,DECWINDOWS) STORAGE LOCATIONS
C ----------------------------------
      COMMON/VWORKS/WD_ID,VD_ID,HW_TYPE,WIDTH,HEIGHT,ATB,
     &  ATB_FNT,ATB_PLY,ATB_TXT,ATB_LOC,CUR_COLOR,VCM_ID,RASP
      INTEGER*4 WD_ID,VD_ID,HW_TYPE,ATB,ATB_TXT,ATB_FNT
      INTEGER*4 ATB_PLY,ATB_LOC,CUR_COLOR,VCM_ID
      REAL*4 WIDTH,HEIGHT,RASP
C-----------------------------------------------------
C  COLOR MAP
      COMMON/COLRS/NCOLRS,RVEC(50),GVEC(50),BVEC(50)
C
C  CURRENT POSITIONS
      COMMON/POSNOW/XPOSN,YPOSN,ZPOSN,   
     &  CRTX,CRTY,ARL  
      REAL XPOSN,YPOSN,ZPOSN,CRTX,CRTY,ARL
C-----------------------------------------------------
C  WINDOWING FLAGS
C  IFDFLT=0 MEANS DEFAULTS ARE IN EFFECT (ONLY JWINDO CALLED)
C  THE REST ARE FLAGS INDICATING JVPORT, JVSPAC, AND JWINDO CALLS.
      COMMON/WFLAGS/IFDFLT,IFSPAC,IFPORT,IFWIND,ITRANS,IMDEV,
     &  XMARG,YMARG
C  ITRANS = IFDFLT OR IPROJ OR IMODEL OR IIMAGE OR IMDEV
C  IMDEV=IFSPAC OR IFPORT
C    (FLAG TO INDICATE THAT A TRANSFORMATION IS NEEDED EITHER BECAUSE
C     WINDOWING HAS BEEN DONE OR A TRANSFORMATION HAS BEEN CALLED FOR)
C-----------------------------------------------------
C  OUTPUT FILE SPECS
      COMMON/OFILE/IUNIT,FILENAM
      CHARACTER*80 FILENAM
