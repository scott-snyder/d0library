                                                        James T. Linnemann
                                                        May 14, 1991
                                                        MSU
                        CL2HITS package
                          Version 1.0

Usage:
=====
    no other packages are required.
    be sure to have at least /ZEBSTP=300000 on the PBD line used to build your
        package
    four RCP banks are used: CALEVT, CAHITS, CALICD, and CL2HITS.
    If you use this package in combination with other packages, be sure to check
the .COM file generated by program builder and set the LAST occurrence of
the logical rcpname_RCP to whatever value you want, since other packages might
ask for the same RCP file.  

    This package converts CAD1 and CAD2 banks to a Level 2 version of a CAEP
bank, under the FILT path.  The pointer array PTCAEP2(lyrc,iphic,ietac) is
filled in analogy with PTCAEP.  However, note that the order of the indices is
reversed from the offline order.  (The offline order will be changed.)
Optionally, a PNUT1 bank may be created.  All banks created have a version
number 3000+n.

The contents of the CAEP bank differs from the CAHITS CAEP bank in the following
ways:
    a) the contents are in ET (nominal) rather than E.  ET(nominal) is defined
as ET calculated assuming that the vertex was at z=0
    b) the packed address is as for offline, but the low 8 bits do not carry the
flags used for conversion.
    c) The version number of the CAEP bank is 3002

The contents of the PNUT1 bank differs from the CAHITS PNUT1 bank in the
following ways:
    a) The following items are not filled (i.e. contain GARBAGE):
C             +5     F       Ez
C              6     F       E
C              8     F       theta
C              9     F       eta
C             11     F       (sigEx)**2
C             12     F       (sigEy)**2
C             13     F        sigEt
    b) The Version number is 3002
This bank has NO ICD/MG contributions.

The accuracy of the energy calculation used is approxmiately 1.5% worst absolute
error for any channel, compared to the offline gain calibration available.

    See CL2_CONV.DOC for further information.

Performance:
===========

    CL2_CAEPFL takes about 100ms/event on a 3100/38 for events with 2.5K 
    channels hit, to make CAEP and PNUT1, and to zero PTCAEP2.  On the same
    data, build CAEP and zeriong the pointers took about 360 ms, while building 
    CAEP, PNUT1 (and CAEH, needed for PNUT1), and zeroing PTCAEP took 1000 ms.
    No zero suppression was performed in the CAHITS routines, and neither did
    gains corrections.  Doing gains corrections would slow down offline, but not
    CL2, as everything is precomputed. Thus the basic algorithm is 3-10 times
    faster than the offline conversion.  Comparing both on building CAEP only
    gave a speedup of 8 for CL2_CAEPFL.  The zeroing algorithms could in
    principle be made identical, speeding up CL2_CAEPFL.

LIMITATIONS:
===========
    CAD bank(s) must be present.
    No Zero Suppression is performed.
    The present version does NOT correct ICD/MG energies in CAEP.
    IF CAEP_ONLY in CAHITS.RCP is FALSE, a PNUT1 (NO ICD/MG) bank is made.
    No CAEH or CATE banks are made.

    Initialization will take 1-2 minutes of CPU on a 3100/38.

    NO ANALYSIS IS PERFORMED

Some Relevant RCP file parameters: (default values are those listed below)
==================================
CAHITS.RCP:

    CAEP_ONLY   F       ! T will turn off comparison of PNUT1
    DO_GNSCOR   F       ! T will try to use DBL3 gain values

CL2HITS.RCP:
                controls what data format the tables will be built for

    D0_DATA   TRUE      ! FALSE => NWA data (not supported yet)
    TBLOAD     0        ! 1 for load 1; 2 for load 2 (not supported yet)
    MONTE_CARLO TRUE    ! FALSE => real data
    SFTVSN 1            ! 2 for Series N Monte Carlo (i.e. most QCD background)
                        ! 1 for Monte Carlo BEFORE Series N
                                        (i.e. most of Grannis data)
                        ! 3 for data AFTER Series N Monte Carlo
                        ! 0 for the CURRENT (Freshly Generated) Monte Carlo
                        ! 0 for CURRENT DATA format
                        ! SFTVSN defined in CALORIMETER_ADDRESSING.MEM V2.02
    NOISE_TYPE   0      ! 0,1,2,3 (to be defined in NOISY.DOC)
    PLATE     FALSE     ! true if PLATE MC
